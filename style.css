/* style.css
   Adjusted: left-page background is now left-aligned and sized to fit the left panel width so
   the artwork sits flush on the left side (no longer visually "pushed" toward the center).
   If you'd like the image to bleed slightly under the spine, I included a commented tweak you
   can enable to expand the pseudo-element slightly leftward.
*/

/* Typekit Carrotflower is loaded in index.html. Fallback to Amatic SC if missing. */
:root{
  --paper: #fbf7ef;
  --edge: #d8cbb9;
  --ink: #1b1b1b;
  --spine: 12px;
  --max-width: 1100px;
  --max-height: 760px;
}

/* Reset and base */
* { box-sizing: border-box; }
html, body, #app { height: 100%; margin: 0; background: var(--paper); -webkit-font-smoothing: antialiased; }
body {
  font-family: "Carrotflower", "Amatic SC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue";
  color: var(--ink);
  overflow: hidden;
}

/* paper texture behind the book */
.paper-bg {
  position: fixed;
  inset: 0;
  z-index: -1;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.06) 0%, transparent 40%),
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><rect fill="%23fbf7ef" width="100%" height="100%"/></svg>');
}

/* Sketchbook container (centered box) */
.sketchbook {
  width: min(var(--max-width), 96vw);
  height: min(var(--max-height), 88vh);
  margin: calc((100vh - min(var(--max-height), 88vh)) / 2) auto;
  position: relative;
  transform-style: preserve-3d;
  overflow: visible;
  user-select: none;
  -webkit-user-select: none;
}

/* LEFT PAGE
   The left visual background is rendered with ::before and aligned to the left edge of the panel.
   background-size is set to 100% of the panel width (keeps aspect ratio: auto height).
   This ensures the artwork sits flush at the left side rather than being centered.
*/
.left-page {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: calc(50% - (var(--spine) / 2));
  padding: 28px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: flex-start;
  justify-content: flex-start;
  z-index: 20;

  /* remove background from element itself */
  background: transparent;
  border-left: 6px solid rgba(0,0,0,0.03);
}

/* PSEUDO-ELEMENT: left page background (anchored left, sized to panel width) */
.left-page::before {
  content: "";
  position: absolute;
  /* fill the left panel area exactly */
  inset: 0;
  z-index: 12; /* below content */
  pointer-events: none;

  /* left-align and size to panel width so the image sits flush on the left half */
  background-image: url("assets/leftpage.png");
  background-position: left center;
  background-repeat: no-repeat;

  /* make the image fit the panel width while preserving aspect ratio */
  background-size: 100% auto;

  /* fallback paper color for any letterbox area */
  background-color: rgba(251,247,239,0.95);
}

/* If you prefer the leftpage artwork to slightly underlap the spine (bleed left),
   uncomment the two lines below and tweak the value (e.g. -6px or -10px).
.left-page::before {
  left: -6px;
  width: calc(100% + 6px);
}
*/

/* left content slot sits above the pseudo-element */
.left-page .left-page-section {
  width: 100%;
  position: relative;
  z-index: 80;
}
.left-page .left-page-section h2 {
  margin: 0 0 12px 0;
  font-size: 28px;
  font-family: "Carrotflower", "Amatic SC", sans-serif;
  line-height: 1.05;
}

/* Right-side pages container */
.pages {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: calc(50% - (var(--spine) / 2));
  transform-style: preserve-3d;
  z-index: 30;
}

/* Common page and cover styles */
.page, .cover {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 28px;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  box-sizing: border-box;
  border: 2px solid var(--edge);
  border-right: 6px solid rgba(0,0,0,0.02);
  box-shadow: 0 24px 60px rgba(17,17,17,0.18);
  backface-visibility: hidden;
  transform-origin: left center;
  background-color: rgba(251,247,239,0.95);
}

/* default right-page background (applies to every right page) */
.pages .page {
  background-image: url("assets/rightpage.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
}

/* COVER specifics */
.cover {
  z-index: 200;
  right: 0;
  left: auto;
  width: calc(50% - (var(--spine) / 2));
  background-color: transparent;
  transition: all 320ms ease;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* Pseudo-element used to render the cover image below .cover-art */
.cover::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 10;
  background: url("assets/bookcover.jpg") center/contain no-repeat;
  background-color: transparent;
  pointer-events: none;
}

/* CLOSED cover centered */
.sketchbook:not(.open) .cover {
  left: 50%;
  right: auto;
  transform: translateX(-50%) rotateY(0deg) !important;
  box-shadow: 0 30px 70px rgba(17,17,17,0.28);
}

/* OPEN cover sits on right half (JS rotates it) */
.sketchbook.open .cover {
  left: auto;
  right: 0;
}

/* hide <img> fallbacks if present */
.cover-img, .left-bg-img, .right-bg-img {
  display: none !important;
}

/* cover overlay (title + subtitle + button) */
.cover-art {
  text-align: center;
  z-index: 20;
  pointer-events: none;
  width: 100%;
  max-width: calc(50% - (var(--spine) / 2) - 56px);
  background: transparent;
}
.cover-art .cover-title {
  margin: 0;
  font-size: 34px;
  line-height: 1;
  font-family: "Carrotflower", "Amatic SC", sans-serif;
  pointer-events: none;
  color: var(--ink);
}
.cover-art .subtitle {
  margin: 6px 0 12px 0;
  color: #7a6a5a;
  pointer-events: none;
}

/* Enter button */
.enter-btn {
  pointer-events: auto;
  display: inline-block;
  margin-top: 6px;
  padding: 10px 18px;
  background: rgba(255,255,255,0.95);
  border: 2px solid #cbb79f;
  border-radius: 8px;
  cursor: pointer;
  font-family: "Carrotflower", "Amatic SC", sans-serif;
  font-size: 18px;
  color: var(--ink);
  box-shadow: 0 6px 10px rgba(0,0,0,0.08);
}

/* page content styles */
.page-content {
  z-index: 80;
  width: 100%;
  color: var(--ink);
  background: transparent;
  font-size: 18px;
}
.page-content h2 {
  margin: 0 0 12px 0;
  font-size: 26px;
  font-weight: 700;
  font-family: "Carrotflower", "Amatic SC", sans-serif;
}

/* all interactive elements use Carrotflower */
button, select, .nav-item {
  font-family: "Carrotflower", "Amatic SC", sans-serif;
  -webkit-font-smoothing: antialiased;
}

/* bottom controls */
.controls {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 18px;
  display: flex;
  gap: 12px;
  z-index: 500;
}
.controls button {
  background: var(--paper);
  border: 2px solid #cbb79f;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 18px;
  cursor: pointer;
}

/* show/hide page menu while closed / open */
.sketchbook:not(.open) #pageMenu { display: none !important; pointer-events: none !important; opacity: 0 !important; }
.sketchbook.open #pageMenu { display: flex !important; pointer-events: auto !important; opacity: 1 !important; }

/* spine gutter */
.sketchbook::before {
  content: "";
  position: absolute;
  left: calc(50% - (var(--spine) / 2));
  top: 0;
  width: var(--spine);
  height: 100%;
  pointer-events: none;
  background: linear-gradient(90deg, rgba(0,0,0,0.04), rgba(0,0,0,0.02) 40%, rgba(0,0,0,0.00));
  z-index: 40;
}

/* small screens */
@media (max-width: 640px) {
  :root { --max-width: calc(100vw - 20px); --max-height: calc(100vh - 20px); }
  .sketchbook { width: calc(100vw - 20px); height: calc(100vh - 20px); margin: 10px auto; }
  .left-page { padding: 18px; }
  .page, .cover { padding: 18px; }
  .page-content { font-size: 15px; }
  .page-content h2 { font-size: 20px; }
  .cover-art .cover-title { font-size: 22px; }
  .enter-btn { font-size: 16px; padding: 8px 12px; }
}
